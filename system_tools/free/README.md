# `free` 命令用法及输出说明

`free` 命令用于显示系统内存使用情况，包括物理内存、交换空间(swap)和内核缓冲区。

## 基本用法

```bash
free [选项]
```

## 常用选项

- `-b`：以字节为单位显示
- `-k`：以KB为单位显示（默认）
- `-m`：以MB为单位显示
- `-g`：以GB为单位显示
- `-h`：人类可读格式自动选择合适的单位
- `-t`：显示总计行
- `-s <秒数>`：持续显示，每隔指定秒数更新一次
- `-c <次数>`：与`-s`配合使用，指定更新次数
- `-w`：宽输出模式，将buffers和cache分开显示

## 输出说明

典型输出示例（使用 `free -h`）：

```
              total        used        free      shared  buff/cache   available
Mem:           15Gi       4.2Gi       6.3Gi       1.2Gi       4.5Gi       9.4Gi
Swap:         2.0Gi       0.0Gi       2.0Gi
```

### 各列含义

1. **total**：总内存量
2. **used**：已使用的内存量
3. **free**：空闲的内存量
4. **shared**：多个进程共享的内存总量
5. **buff/cache**：用作缓冲和缓存的内存量
6. **available**：估计可用于启动新应用程序的内存量，不含交换空间

### 各行含义

- **Mem**：物理内存使用情况
- **Swap**：交换空间使用情况
- **Total**（使用`-t`选项时显示）：内存总计

## 实际可用内存计算

Linux系统会尽可能利用内存作为缓存(cache)和缓冲(buffer)，所以不能简单看"free"列来判断内存是否充足。更准确的方法是看"available"列，它表示系统估算的可用于新应用的内存。

## 示例

1. 以人类可读格式显示内存使用情况：
   ```bash
   free -h
   ```

2. 每5秒刷新一次，共刷新3次：
   ```bash
   free -s 5 -c 3
   ```

3. 显示详细的内存信息（分开buffers和cache）：
   ```bash
   free -w
   ```

4. 以MB为单位显示内存信息并显示总计：
   ```bash
   free -m -t
   ```

`free`命令是Linux系统内存监控的重要工具，可以帮助管理员了解系统的内存使用状况。
